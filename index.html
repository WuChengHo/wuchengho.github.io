<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>☾ PRICE RITUAL — Multi-Site Opener</title>

<!-- Gothic + modern monospace mix -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

<style>
  /* ========= MONOCHROME • HAUNTED AESTHETIC ========= */
  :root{
    --bg:#0a0a0a; --panel:#0f0f0f; --ink:#e9e9e9; --muted:#9a9a9a; --line:#1b1b1b; --accent:#ffffff;
    --shadow: 0 30px 70px rgba(0,0,0,.6);
    --radius: 16px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    background:
      radial-gradient(1200px 800px at 50% -10%, #1a1a1a 0 40%, transparent 40%),
      radial-gradient(1100px 600px at 120% 0%, #121212 0 45%, transparent 45%),
      radial-gradient(1100px 600px at -20% 0%, #121212 0 45%, transparent 45%),
      var(--bg);
    font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    letter-spacing:.2px;
    /* subtle grain */
    position:relative; overflow-x:hidden; cursor:crosshair;
  }
  /* Film grain & scanlines overlay */
  body::before, body::after{
    content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
  }
  body::before{
    background:
      repeating-linear-gradient(0deg, rgba(255,255,255,.02) 0 2px, rgba(0,0,0,0) 2px 4px),
      radial-gradient(1200px 800px at 50% 120%, rgba(255,255,255,.02), transparent 60%);
    mix-blend-mode:overlay;
  }
  body::after{
    background: url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'>\
        <filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/></filter>\
        <rect width='100%' height='100%' filter='url(%23n)' opacity='.05'/>\
      </svg>") repeat;
    animation: drift 20s linear infinite;
    opacity:.7;
  }
  @keyframes drift { from{transform:translate3d(0,0,0)} to{transform:translate3d(-160px,-160px,0)} }

  /* Layout */
  .wrap{ max-width:1100px; margin:56px auto; padding:0 22px; display:grid; gap:22px; position:relative; z-index:1 }
  .header{ text-align:center; display:grid; gap:8px }
  .title{
    font-family:"Cinzel", serif; font-weight:800; letter-spacing:.12em;
    font-size:clamp(1.6rem, 4vw, 2.8rem); color:var(--accent);
    text-shadow: 0 0 2px #fff, 0 0 22px rgba(255,255,255,.15);
    position:relative; display:inline-block; margin:0 auto;
  }
  /* Dripping underline */
  .title::after{
    content:""; position:absolute; left:5%; right:5%; bottom:-10px; height:2px; background:linear-gradient(90deg,#fff, #777, #fff);
    box-shadow:0 0 18px rgba(255,255,255,.18);
  }
  .subtitle{ color:var(--muted); font-size:.95rem }

  .panel{
    background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.00));
    border:1px solid var(--line); border-radius:var(--radius);
    box-shadow:var(--shadow);
  }

  /* Search bar */
  .bar{ padding:18px; display:grid; gap:12px }
  .search{ display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:center }
  .input{
    width:100%; padding:16px 18px; background:#0c0c0c; color:var(--ink);
    border:1px solid #2a2a2a; border-radius:12px; font-size:1.05rem; outline:none; transition:.2s;
  }
  .input:focus{ box-shadow:0 0 0 6px rgba(255,255,255,.04), inset 0 0 0 1px #fff; border-color:#fff }
  .btn{
    appearance:none; border:1px solid #fff; background:#111; color:#fff;
    padding:14px 18px; border-radius:12px; font-weight:800; letter-spacing:.12em; text-transform:uppercase;
    display:inline-flex; align-items:center; gap:10px; cursor:pointer;
    transition: transform .12s ease, background .2s ease, color .2s ease, box-shadow .2s ease;
    box-shadow:0 10px 30px rgba(0,0,0,.5);
  }
  .btn:hover{ transform: translateY(-1px); background:#fff; color:#000 }
  .btn.ghost{ background:transparent; color:var(--ink); border-style:dashed }
  .actions{ display:flex; flex-wrap:wrap; gap:10px }

  /* Sites grid */
  .sites{ padding:16px; display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)) }
  .site{
    display:flex; align-items:center; gap:12px; padding:12px 12px;
    background:#0c0c0c; border:1px solid #232323; border-radius:14px;
    transition:.15s transform, .15s box-shadow, .15s border-color;
  }
  .site:hover{ transform:translateY(-2px); border-color:#fff; box-shadow:0 12px 26px rgba(0,0,0,.45) }
  .badge{
    width:42px; height:42px; border-radius:10px; display:grid; place-items:center; font-weight:900;
    color:#000; background:#fff;
    text-shadow: none;
  }
  .site label{ display:flex; align-items:center; gap:12px; cursor:pointer; width:100% }
  .site input{ transform:scale(1.2) }
  .name{ font-weight:800 }
  .hint{ font-size:.78rem; color:#8a8a8a }

  /* Links preview */
  .links{ padding:16px; display:grid; gap:10px }
  .link-chip{
    display:flex; align-items:center; gap:12px; padding:12px 14px; background:#0c0c0c; border:1px dashed #2b2b2b; border-radius:12px;
    transition:.15s transform, .15s border-color, .15s background;
  }
  .link-chip:hover{ transform:translateY(-2px); border-color:#fff; background:#0f0f0f }
  .link-chip a{ color:#fff; text-decoration:none; font-weight:800 }
  .empty{ color:var(--muted) }

  /* Footer */
  .foot{ text-align:center; color:#777; padding:8px 0 28px; font-size:.92rem }

  /* Flicker effect for the main button label */
  .flicker { position:relative; }
  .flicker::after{
    content:attr(data-ghost); position:absolute; inset:0; color:#fff; opacity:.12; filter:blur(1px); transform:translate(1px,0);
    animation: jitter .12s infinite alternate;
  }
  @keyframes jitter { to { transform: translate(-1px,0) } }

  @media (max-width:680px){
    .search{ grid-template-columns:1fr }
    .btn{ width:100%; justify-content:center }
  }
</style>
</head>
<body>
  <main class="wrap">
    <header class="header">
      <h1 class="title">PRICE RITUAL</h1>
      <p class="subtitle">Summon the search pages from many stores at once. No scraping. No storage. Just portals.</p>
    </header>

    <!-- BAR -->
    <section class="panel bar" aria-label="Search & Actions">
      <div class="search">
        <input id="q" class="input" placeholder="Type the product name... e.g. wireless mouse, AirPods, gaming keyboard" />
        <button id="openAll" class="btn"><span class="flicker" data-ghost="OPEN PORTALS">OPEN PORTALS</span> ☽</button>
      </div>
      <div class="actions">
        <button id="preview" class="btn">Preview Links</button>
        <button id="copyLinks" class="btn">Copy All</button>
        <button id="selectAll" class="btn ghost">Toggle Select</button>
        <span class="subtitle">If your browser blocks pop-ups, allow them for this page.</span>
      </div>
    </section>

    <!-- SITES -->
    <section class="panel" aria-label="Stores">
      <div class="sites" id="sites"></div>
      <div style="padding:10px 16px 18px" class="subtitle">Click “Preview Links” to reveal the gateways below.</div>
    </section>

    <!-- LINKS -->
    <section class="panel links" id="links" aria-label="Preview">
      <div class="empty">Nothing yet. Enter keywords, then press “Preview Links”.</div>
    </section>

    <footer class="foot">
      This tool only builds search URLs and opens them in new tabs. It does not read, store, or compare prices.
    </footer>
  </main>

<script>
/* ======= STORE DEFINITIONS (MONOCHROME) ======= */
const SITES = [
  { id:'momo',   name:'momo Shop (TW)',     badge:'MO', url:'https://www.momoshop.com.tw/search/searchShop.jsp?keyword={q}' },
  { id:'pchome', name:'PChome 24h (TW)',    badge:'PC', url:'https://www.pchome.com.tw/search/?q={q}' },
  { id:'shopee', name:'Shopee (TW)',        badge:'SP', url:'https://shopee.tw/search?keyword={q}' },
  { id:'yahoo',  name:'Yahoo Shopping (TW)',badge:'YA', url:'https://tw.buy.yahoo.com/search/product?p={q}' },
  { id:'rakuten',name:'Rakuten (TW)',       badge:'RA', url:'https://www.rakuten.com.tw/search/{q}/' },
  { id:'amazon', name:'Amazon (US)',        badge:'AM', url:'https://www.amazon.com/s?k={q}' },
  { id:'ebay',   name:'eBay',               badge:'EB', url:'https://www.ebay.com/sch/i.html?_nkw={q}' },
  { id:'gshop',  name:'Google Shopping',    badge:'GS', url:'https://www.google.com/search?tbm=shop&q={q}' }
];

const $sites = document.getElementById('sites');
const $links = document.getElementById('links');
const $q = document.getElementById('q');

function buildUrl(tpl, q){ return tpl.replace('{q}', encodeURIComponent(q.trim())); }

function siteCard(site){
  const wrap = document.createElement('div');
  wrap.className = 'site';
  const label = document.createElement('label');

  const cb = document.createElement('input');
  cb.type = 'checkbox';
  cb.checked = ['momo','pchome','shopee','yahoo'].includes(site.id); // preselect common ones

  const badge = document.createElement('div');
  badge.className = 'badge';
  badge.textContent = site.badge;

  const info = document.createElement('div');
  const name = document.createElement('div'); name.className='name'; name.textContent = site.name;
  const hint = document.createElement('div'); hint.className='hint'; hint.textContent = site.url.replace('{q}','{keyword}');
  info.append(name, hint);

  label.append(cb, badge, info);
  wrap.append(label);
  return wrap;
}

function renderSites(){
  $sites.innerHTML = '';
  SITES.forEach(s => $sites.appendChild(siteCard(s)));
}

function selectedDefs(){
  const boxes = $sites.querySelectorAll('input[type="checkbox"]');
  const ids = [...boxes].filter(b => b.checked).map(b => {
    const item = b.closest('.site');
    const idx = [...$sites.children].indexOf(item);
    return SITES[idx].id;
  });
  return SITES.filter(s => ids.includes(s.id));
}

function renderLinks(){
  const q = $q.value.trim();
  $links.innerHTML = '';
  if(!q){ $links.innerHTML = '<div class="empty">Enter a keyword, then hit “Preview Links”.</div>'; return; }
  const defs = selectedDefs();
  if(defs.length===0){ $links.innerHTML = '<div class="empty">Select at least one store.</div>'; return; }
  defs.forEach(d=>{
    const row = document.createElement('div'); row.className='link-chip';
    const badge = document.createElement('div'); badge.className='badge'; badge.textContent=d.badge;
    const a = document.createElement('a'); a.href=buildUrl(d.url, q); a.target='_blank'; a.rel='noopener';
    a.textContent = `Open ${d.name}`;
    row.append(badge, a);
    $links.appendChild(row);
  });
}

/* EVENTS */
document.getElementById('preview').addEventListener('click', renderLinks);

/* Open multiple tabs synchronously (allowed by user-gesture) */
document.getElementById('openAll').addEventListener('click', ()=>{
  const q = $q.value.trim();
  if(!q){ alert('Type a product name first.'); $q.focus(); return; }
  const defs = selectedDefs();
  if(defs.length===0){ alert('Select at least one store.'); return; }
  defs.forEach(d => window.open(buildUrl(d.url, q), '_blank', 'noopener'));
});

/* Toggle select all/none */
document.getElementById('selectAll').addEventListener('click', ()=>{
  const boxes = $sites.querySelectorAll('input[type="checkbox"]');
  const list = [...boxes];
  const all = list.every(b => b.checked);
  list.forEach(b => b.checked = !all);
  renderLinks();
});

/* Copy all links */
document.getElementById('copyLinks').addEventListener('click', async ()=>{
  const q = $q.value.trim();
  if(!q){ alert('Type a product name first.'); return; }
  const urls = selectedDefs().map(d => buildUrl(d.url, q));
  if(urls.length===0){ alert('Select at least one store.'); return; }
  try{
    await navigator.clipboard.writeText(urls.join('\n'));
    alert('All links copied to clipboard.');
  }catch{
    const ta=document.createElement('textarea'); ta.value=urls.join('\n'); document.body.appendChild(ta); ta.select();
    document.execCommand('copy'); ta.remove();
    alert('All links copied to clipboard.');
  }
});

/* Small UX touches */
$q.addEventListener('keydown', e => { if(e.key==='Enter') document.getElementById('preview').click(); });
$sites.addEventListener('change', renderLinks);

renderSites(); $q.focus();
</script>
</body>
</html>
